(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{281:function(e,t,a){e.exports=a(419)},419:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),c=a.n(o),i=a(21),l=a(495),s=a(496),u=a(476),m=a(478),d=a(421),f=a(474),g=a(221),p=a.n(g),h=a(479),E=Object(f.a)((function(e){return{fabButton:{position:"relative",zIndex:1,top:30,margin:"0 auto"}}}));var y=function(e){e.accounts;var t=e.plaidHandler,a=E();return r.a.createElement(u.a,{position:"static"},r.a.createElement(m.a,null,r.a.createElement(d.a,{variant:"h5"},"Welcome to Omniscient"),r.a.createElement(h.a,{onClick:function(){t.open()},variant:"extended",color:"secondary","aria-label":"add",className:a.fabButton},r.a.createElement(p.a,null),"Add Bank")))},b=a(483),v=a(499),S=a(485),O=a(480),w=a(481),k=a(482);var x=function(e){var t=e.name,a=e.balance;return e.image_url,r.a.createElement(O.a,null,r.a.createElement(w.a,null,r.a.createElement(k.a,null,r.a.createElement(d.a,{align:"center",variant:"body2",component:"h3"},t),r.a.createElement(d.a,{align:"center",color:"secondary",variant:"h6",component:"h2"},"$",a))))},j=Object(f.a)((function(e){return{bank_grid:{marginTop:"30px",marginBottom:"30px"}}}));var _=function(e){var t=e.accounts,a=j(),n=r.a.useState(null),o=Object(i.a)(n,2),c=o[0],l=o[1];return r.a.useEffect((function(){0!==t.length&&window.fetch("http://lvh.me:7000/accounts/balance/get",{method:"POST",headers:{"content-type":"application/json;charset=UTF-8"},body:JSON.stringify({access_token:t[0][1]})}).then((function(e){return e.json()})).then((function(e){l(e.filter((function(e){return"depository"===e.type})).map((function(e){return{name:e.official_name,balance:e.balances.current,image_url:""}})))}))}),[t]),c&&t.length>0?r.a.createElement(b.a,{container:!0,direction:"row",justify:"center",spacing:2,alignItems:"center",className:a.bank_grid},c.map((function(e){return r.a.createElement(b.a,{key:e.name,item:!0,xs:3},r.a.createElement(x,e))}))):r.a.createElement(v.a,{severity:"info"},r.a.createElement(S.a,null,"You currently have no accounts."),"Press the 'add' button to link your first current depository account.")},D=a(29),P=a(25),I=a(236),N=a(235),C=a(498),J=a(222);function B(e){var t=new Map;return e.forEach((function(e){var a=e.date,n=t.get(a);t.set(a,e.amount+(n||0))})),t}function T(e){for(var t=new Date(e[0].x),a=new Date(e[e.length-1].x),n=Math.round((a-t)/864e5),r=e.map((function(e){return e.x})),o=[],c=0;c<n;c++){var i=t.addDays(c).toISOString().slice(0,10),l=r.indexOf(i);-1===l?o.push({x:i,y:0}):o.push(e[l])}return o}Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t};var A=function(e){var t=e.chartData;return r.a.createElement(C.a,{height:"300px",width:"100%"},r.a.createElement(J.a,{data:[{id:"Daily Spend",data:T(t)}],colors:["#3f51b5"],enableArea:!0,pointSize:5,enableCrosshair:!1,margin:{bottom:100,top:10,left:60,right:5},enableGridX:!1,enableGridY:!1,xScale:{type:"time",format:"%Y-%m-%d",precision:"day"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!0,reverse:!1},xFormat:"time:%Y-%m-%d",axisBottom:{format:"%b %d",tickValues:"every 2 days",tickRotation:60,legend:"Date",legendOffset:66,legendPosition:"middle"},pointBorderWidth:1,useMesh:!0,enableSlices:!1,axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:"$ Daily Spend ",legendOffset:-50,legendPosition:"middle"}}))},M=function(e){Object(I.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(D.a)(this,a),(n=t.call(this,e)).state={data:Array.from(B(e.transactions)).map((function(e){return{x:e[0],y:e[1]}})).reverse()},n}return Object(P.a)(a,[{key:"render",value:function(){var e=this.state.data;return e?(console.log(e),r.a.createElement(A,{chartData:e})):null}}]),a}(r.a.PureComponent),z=a(488),F=a(237),Y=a(489),R=a(490),U=a(491),W=a(492),G=a(493),H=a(494),$=a(497);var L=function(e){var t=e.transactions,a=r.a.useState(0),n=Object(i.a)(a,2),o=n[0],c=n[1],l=r.a.useState(5),s=Object(i.a)(l,2),u=s[0],m=s[1],d=u-Math.min(u,t.length-o*u);return r.a.createElement(z.a,{component:F.a},r.a.createElement(Y.a,{"aria-label":"custom pagination table",size:"small"},r.a.createElement(R.a,null,r.a.createElement(U.a,null,r.a.createElement(W.a,null,"Store"),r.a.createElement(W.a,{align:"right"},"Amount"),r.a.createElement(W.a,{align:"right"},"Category"),r.a.createElement(W.a,{align:"right"},"Date"))),r.a.createElement(G.a,null,(u>0?t.slice(o*u,o*u+u):t).map((function(e){return r.a.createElement(U.a,{key:e.store},r.a.createElement(W.a,{component:"th",scope:"row"},e.store),r.a.createElement(W.a,{align:"right"},e.amount),r.a.createElement(W.a,{align:"right"},e.category),r.a.createElement(W.a,{align:"right"},e.date))})),d>0&&r.a.createElement(U.a,{style:{height:53*d}},r.a.createElement(W.a,{colSpan:6}))),r.a.createElement(H.a,null,r.a.createElement(U.a,null,r.a.createElement($.a,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:3,count:t.length,rowsPerPage:u,page:o,onChangePage:function(e,t){c(t)},onChangeRowsPerPage:function(e){m(parseInt(e.target.value,10)),c(0)}})))))},V=a(234),X=a.n(V),q=Object(f.a)((function(e){return{root:{display:"flex",flexDirection:"row",justifyContent:"center"}}}));var K=function(){q();var e=r.a.useState((function(){var e=window.localStorage.getItem("plaid_items");return e?JSON.parse(e):(window.localStorage.setItem("plaid_items",JSON.stringify([])),[])})),t=Object(i.a)(e,2),a=t[0],n=t[1],o=r.a.useState(null),c=Object(i.a)(o,2),u=c[0],m=c[1];r.a.useEffect((function(){0!==a.length&&window.fetch("http://lvh.me:7000/transactions",{method:"POST",headers:{"content-type":"application/json;charset=UTF-8"},body:JSON.stringify({access_token:a[0][1]})}).then((function(e){return e.json()})).then((function(e){m(e.map((function(e){return{amount:e.amount,store:e.name,date:e.date,category:e.category[1]}})))}))}),[a]);var d=Plaid.create({clientName:"Omniscient",countryCodes:["US"],env:"sandbox",key:"4fcccae7bfd43b8b5b607099f46e79",product:["transactions","auth"],accountSubtypes:{depository:["checking","savings"]},language:"en",onSuccess:function(e,t){console.log(e),window.fetch("http://lvh.me:7000/get_access_token",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({public_token:e})}).then((function(e){return e.json()})).then((function(t){var a=JSON.parse(window.localStorage.getItem("plaid_items"));-1===a.indexOf(e)&&a.push([t.item_id,t.access_token]),window.localStorage.setItem("plaid_items",JSON.stringify(a)),n(a)}))}}),f=a.length>0&&u?function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,{transactions:u}),r.a.createElement(L,{transactions:u}))}:function(){return null};return r.a.createElement(l.a,{maxWidth:"sm"},r.a.createElement(s.a,{startIcon:r.a.createElement(X.a,null),onClick:function(){window.localStorage.setItem("plaid_items",JSON.stringify([])),n([])}},"Disconnect"),r.a.createElement(y,{accounts:a,plaidHandler:d}),r.a.createElement(_,{accounts:a}),r.a.createElement(f,null))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K,null)),document.getElementById("root"))}},[[281,1,2]]]);
//# sourceMappingURL=main.3f430aad.chunk.js.map