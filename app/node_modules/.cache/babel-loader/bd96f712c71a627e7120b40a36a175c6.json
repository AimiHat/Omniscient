{"ast":null,"code":"var _jsxFileName = \"/Users/aimihat/Desktop/Side Projects/Omniscient/front-end/src/App.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Container, Typography, Button, Grid, Box } from '@material-ui/core';\nimport { Skeleton } from '@material-ui/lab';\nimport TitleBar from './components/TitleBar';\nimport Summary from './components/Summary';\nimport TransactionsList from './components/TransactionsList';\nimport LockIcon from '@material-ui/icons/Lock';\nimport Fab from '@material-ui/core/Fab';\nimport { makeStyles } from '@material-ui/core/styles';\nimport config from './config';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"center\"\n  }\n}));\n\nfunction createData(name, calories, fat) {\n  return {\n    name,\n    calories,\n    fat\n  };\n}\n\nconst rows = [createData('Cupcake', 305, 3.7), createData('Donut', 452, 25.0), createData('Eclair', 262, 16.0), createData('Frozen yoghurt', 159, 6.0), createData('Gingerbread', 356, 16.0), createData('Honeycomb', 408, 3.2), createData('Ice cream sandwich', 237, 9.0), createData('Jelly Bean', 375, 0.0), createData('KitKat', 518, 26.0), createData('Lollipop', 392, 0.2), createData('Marshmallow', 318, 0), createData('Nougat', 360, 19.0), createData('Oreo', 437, 18.0)].sort((a, b) => a.calories < b.calories ? -1 : 1);\n\nfunction App() {\n  const classes = useStyles();\n\n  const getPlaidAccounts = () => {\n    const storedAccounts = window.localStorage.getItem(\"plaid_items\");\n\n    if (storedAccounts) {\n      return JSON.parse(storedAccounts);\n    } else {\n      window.localStorage.setItem(\"plaid_items\", JSON.stringify([]));\n      return [];\n    }\n  };\n\n  const [accounts, setAccounts] = React.useState(getPlaidAccounts);\n  const [transactions, setTransactions] = React.useState(null);\n  React.useEffect(() => {\n    if (accounts.length === 0) {\n      return;\n    }\n\n    window.fetch(\"http://lvh.me:7000/transactions\", {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json;charset=UTF-8'\n      },\n      body: JSON.stringify({\n        access_token: accounts[0][1]\n      })\n    }).then(r => r.json()).then(response => {\n      setTransactions(response.map(t => {\n        return {\n          amount: t.amount,\n          store: t.name,\n          date: t.date,\n          category: t.category[1]\n        };\n      }));\n    });\n  }, [accounts]);\n  /*global Plaid*/\n\n  /*global $*/\n\n  var plaidLinkHandler = Plaid.create({\n    clientName: 'Omniscient',\n    countryCodes: ['US'],\n    env: 'sandbox',\n    key: '4fcccae7bfd43b8b5b607099f46e79',\n    product: ['transactions', 'auth'],\n    accountSubtypes: {\n      depository: ['checking', 'savings']\n    },\n    language: 'en',\n    onSuccess: function (public_token, metadata) {\n      console.log(public_token);\n      window.fetch(\"http://lvh.me:7000/get_access_token\", {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          public_token: public_token\n        })\n      }).then(r => r.json()).then(r => {\n        const plaid_items = JSON.parse(window.localStorage.getItem(\"plaid_items\"));\n\n        if (plaid_items.indexOf(public_token) === -1) {\n          plaid_items.push([r.item_id, r.access_token]);\n        }\n\n        window.localStorage.setItem(\"plaid_items\", JSON.stringify(plaid_items));\n        setAccounts(plaid_items);\n      });\n    }\n  });\n  const Data = accounts.length > 0 ? () => {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      justify: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Skeleton, {\n      variant: \"rect\",\n      width: 400,\n      height: 200,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 42\n      }\n    })), /*#__PURE__*/React.createElement(TransactionsList, {\n      transactions: transactions,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }\n    }));\n  } : () => null;\n  return /*#__PURE__*/React.createElement(Container, {\n    maxWidth: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    startIcon: /*#__PURE__*/React.createElement(LockIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 24\n      }\n    }),\n    onClick: () => {\n      window.localStorage.setItem(\"plaid_items\", JSON.stringify([]));\n      setAccounts([]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 5\n    }\n  }, \"Disconnect\"), /*#__PURE__*/React.createElement(TitleBar, {\n    accounts: accounts,\n    plaidHandler: plaidLinkHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Summary, {\n    accounts: accounts,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Data, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 5\n    }\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/aimihat/Desktop/Side Projects/Omniscient/front-end/src/App.js"],"names":["React","ReactDOM","Container","Typography","Button","Grid","Box","Skeleton","TitleBar","Summary","TransactionsList","LockIcon","Fab","makeStyles","config","useStyles","theme","root","display","flexDirection","justifyContent","createData","name","calories","fat","rows","sort","a","b","App","classes","getPlaidAccounts","storedAccounts","window","localStorage","getItem","JSON","parse","setItem","stringify","accounts","setAccounts","useState","transactions","setTransactions","useEffect","length","fetch","method","headers","body","access_token","then","r","json","response","map","t","amount","store","date","category","plaidLinkHandler","Plaid","create","clientName","countryCodes","env","key","product","accountSubtypes","depository","language","onSuccess","public_token","metadata","console","log","plaid_items","indexOf","push","item_id","Data"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Container, Typography, Button, Grid, Box} from '@material-ui/core';\nimport {Skeleton} from '@material-ui/lab'\nimport TitleBar from './components/TitleBar'\nimport Summary from './components/Summary'\nimport TransactionsList from './components/TransactionsList'\nimport LockIcon from '@material-ui/icons/Lock';\nimport Fab from '@material-ui/core/Fab';\nimport {makeStyles} from '@material-ui/core/styles';\nimport config from './config';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"center\"\n  }\n}));\n\nfunction createData(name, calories, fat) {\n  return {name, calories, fat};\n}\n\nconst rows = [\n  createData('Cupcake', 305, 3.7),\n  createData('Donut', 452, 25.0),\n  createData('Eclair', 262, 16.0),\n  createData('Frozen yoghurt', 159, 6.0),\n  createData('Gingerbread', 356, 16.0),\n  createData('Honeycomb', 408, 3.2),\n  createData('Ice cream sandwich', 237, 9.0),\n  createData('Jelly Bean', 375, 0.0),\n  createData('KitKat', 518, 26.0),\n  createData('Lollipop', 392, 0.2),\n  createData('Marshmallow', 318, 0),\n  createData('Nougat', 360, 19.0),\n  createData('Oreo', 437, 18.0)\n].sort((a, b) => (\n  a.calories < b.calories\n  ? -1\n  : 1));\n\nfunction App() {\n  const classes = useStyles();\n\n  const getPlaidAccounts = () => {\n    const storedAccounts = window.localStorage.getItem(\"plaid_items\");\n    if (storedAccounts) {\n      return JSON.parse(storedAccounts);\n    } else {\n      window.localStorage.setItem(\"plaid_items\", JSON.stringify([]));\n      return [];\n    }\n  }\n\n  const [accounts, setAccounts] = React.useState(getPlaidAccounts);\n  const [transactions, setTransactions] = React.useState(null);\n\n  React.useEffect(()=> {\n    if (accounts.length === 0) {\n      return\n    }\n    window.fetch(\"http://lvh.me:7000/transactions\", {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json;charset=UTF-8'\n      },\n      body: JSON.stringify({access_token: accounts[0][1]})\n    }).then(r => r.json()).then(response => {\n      setTransactions(response.map(t => {return {\n        amount : t.amount,\n        store: t.name,\n        date: t.date,\n        category: t.category[1]\n      }}))\n    })\n  }, [accounts])\n\n  /*global Plaid*/\n  /*global $*/\n  var plaidLinkHandler = Plaid.create({\n    clientName: 'Omniscient',\n    countryCodes: ['US'],\n    env: 'sandbox',\n    key: '4fcccae7bfd43b8b5b607099f46e79',\n    product: [\n      'transactions', 'auth'\n    ],\n    accountSubtypes: {\n      depository: ['checking', 'savings']\n    },\n    language: 'en',\n    onSuccess: function(public_token, metadata) {\n      console.log(public_token);\n      window.fetch(\"http://lvh.me:7000/get_access_token\", {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({public_token: public_token})\n      }).then(r => r.json()).then(r => {\n        const plaid_items = JSON.parse(window.localStorage.getItem(\"plaid_items\"));\n        if (plaid_items.indexOf(public_token) === -1) {\n          plaid_items.push([r.item_id, r.access_token]);\n        }\n        window.localStorage.setItem(\"plaid_items\", JSON.stringify(plaid_items))\n        setAccounts(plaid_items);\n      })\n    }\n  });\n\n  const Data = accounts.length > 0\n    ? (() => {\n      return (<React.Fragment>\n        <Grid container justify=\"center\"><Skeleton variant=\"rect\" width={400} height={200}/></Grid>\n        <TransactionsList transactions={transactions}/>\n      </React.Fragment>)\n    })\n    : () => null;\n\n  return (<Container maxWidth=\"sm\">\n    <Button startIcon={<LockIcon />} onClick={() => {\n        window.localStorage.setItem(\"plaid_items\", JSON.stringify([]));\n        setAccounts([]);\n      }}>\n      Disconnect\n    </Button>\n    <TitleBar accounts={accounts} plaidHandler={plaidLinkHandler}/>\n    <Summary accounts={accounts}/>\n    <Data/>\n  </Container>);\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}