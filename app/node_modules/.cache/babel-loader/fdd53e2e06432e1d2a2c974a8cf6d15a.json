{"ast":null,"code":"import _classCallCheck from\"/Users/aimihat/Desktop/Side Projects/Omniscient/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/aimihat/Desktop/Side Projects/Omniscient/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/aimihat/Desktop/Side Projects/Omniscient/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/aimihat/Desktop/Side Projects/Omniscient/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Typography,Grid,Box,Paper}from'@material-ui/core';import{ResponsiveLine}from'@nivo/line';function sumByDate(list){var map=new Map();list.forEach(function(item){var key=item.date;var collection=map.get(key);map.set(key,item.amount+(collection?collection:0));});return map;}Date.prototype.addDays=function(days){var date=new Date(this.valueOf());date.setDate(date.getDate()+days);return date;};function addMissingDays(data){var firstDay=new Date(data[0].x);var lastDay=new Date(data[data.length-1].x);var nDays=Math.round((lastDay-firstDay)/(24*60*60*1000));var dates=data.map(function(r){return r.x;});var newData=[];for(var i=0;i<nDays;i++){var day=firstDay.addDays(i).toISOString().slice(0,10);var ind=dates.indexOf(day);if(ind===-1){newData.push({x:day,y:0});}else{newData.push(data[ind]);}}return newData;}// make sure parent container have a defined height when using\n// responsive component, otherwise height will be 0 and\n// no chart will be rendered.\n// website examples showcase many properties,\n// you'll often use just a few of them.\nvar MyResponsiveBar=function MyResponsiveBar(_ref){var chartData=_ref.chartData;return/*#__PURE__*/React.createElement(Box,{height:\"300px\",width:\"100%\"},/*#__PURE__*/React.createElement(ResponsiveLine,{data:[{id:'Daily Spend',data:addMissingDays(chartData)}],colors:['#3f51b5'],enableArea:true,pointSize:5,enableCrosshair:false,margin:{bottom:100,top:10,left:60,right:5},enableGridX:false,enableGridY:false,xScale:{type:'time',format:'%Y-%m-%d',precision:'day'},yScale:{type:'linear',min:'auto',max:'auto',stacked:true,reverse:false},xFormat:\"time:%Y-%m-%d\",axisBottom:{format:'%b %d',tickValues:'every 2 days',tickRotation:60,legend:'Date',legendOffset:66,legendPosition:'middle'},pointBorderWidth:1,useMesh:true,enableSlices:false,axisLeft:{orient:'left',tickSize:5,tickPadding:5,tickRotation:0,legend:'$ Daily Spend ',legendOffset:-50,legendPosition:'middle'}}));};var DailyView=/*#__PURE__*/function(_React$PureComponent){_inherits(DailyView,_React$PureComponent);var _super=_createSuper(DailyView);function DailyView(props){var _this;_classCallCheck(this,DailyView);_this=_super.call(this,props);_this.state={data:Array.from(sumByDate(props.transactions)).map(function(day){return{x:day[0],y:day[1]};}).reverse()};return _this;}_createClass(DailyView,[{key:\"render\",value:function render(){var chartData=this.state.data;if(!chartData){return null;}console.log(chartData);return/*#__PURE__*/React.createElement(MyResponsiveBar,{chartData:chartData});}}]);return DailyView;}(React.PureComponent);export{DailyView as default};","map":{"version":3,"sources":["/Users/aimihat/Desktop/Side Projects/Omniscient/front-end/src/components/DailyView.js"],"names":["React","Typography","Grid","Box","Paper","ResponsiveLine","sumByDate","list","map","Map","forEach","item","key","date","collection","get","set","amount","Date","prototype","addDays","days","valueOf","setDate","getDate","addMissingDays","data","firstDay","x","lastDay","length","nDays","Math","round","dates","r","newData","i","day","toISOString","slice","ind","indexOf","push","y","MyResponsiveBar","chartData","id","bottom","top","left","right","type","format","precision","min","max","stacked","reverse","tickValues","tickRotation","legend","legendOffset","legendPosition","orient","tickSize","tickPadding","DailyView","props","state","Array","from","transactions","console","log","PureComponent"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {Typography, Grid, Box, Paper} from '@material-ui/core';\nimport {ResponsiveLine} from '@nivo/line'\n\nfunction sumByDate(list) {\n  const map = new Map();\n  list.forEach((item) => {\n    const key = item.date;\n    const collection = map.get(key);\n    map.set(key, item.amount + (\n      collection\n      ? collection\n      : 0));\n  });\n  return map;\n}\n\nDate.prototype.addDays = function(days) {\n  var date = new Date(this.valueOf());\n  date.setDate(date.getDate() + days);\n  return date;\n}\n\nfunction addMissingDays(data) {\n  let firstDay = new Date(data[0].x);\n  let lastDay = new Date(data[data.length - 1].x);\n  const nDays = Math.round((lastDay - firstDay) / (24 * 60 * 60 * 1000));\n  const dates = data.map(r => r.x);\n\n  let newData = [];\n\n  for (var i = 0; i < nDays; i++) {\n    let day = firstDay.addDays(i).toISOString().slice(0, 10);\n    const ind = dates.indexOf(day);\n    if (ind === -1) {\n      newData.push({x: day, y: 0});\n    } else {\n      newData.push(data[ind]);\n    }\n  }\n  return newData;\n}\n\n// make sure parent container have a defined height when using\n// responsive component, otherwise height will be 0 and\n// no chart will be rendered.\n// website examples showcase many properties,\n// you'll often use just a few of them.\nconst MyResponsiveBar = ({\n  chartData/* see data tab */\n}) => (<Box height=\"300px\" width=\"100%\">\n  <ResponsiveLine data={[{\n        id: 'Daily Spend',\n        data: addMissingDays(chartData)\n      }\n    ]} colors={['#3f51b5']} enableArea={true} pointSize={5} enableCrosshair={false} margin={{\n      bottom: 100, top: 10, left: 60, right: 5\n    }} enableGridX={false} enableGridY={false} xScale={{\n      type: 'time',\n      format: '%Y-%m-%d',\n      precision: 'day'\n    }} yScale={{ type: 'linear', min: 'auto', max: 'auto', stacked: true, reverse: false }} xFormat=\"time:%Y-%m-%d\" axisBottom={{\n      format: '%b %d',\n      tickValues: 'every 2 days',\n      tickRotation: 60,\n      legend: 'Date',\nlegendOffset: 66,\nlegendPosition: 'middle'\n    }} pointBorderWidth={1} useMesh={true} enableSlices={false} axisLeft={{\n            orient: 'left',\n            tickSize: 5,\n            tickPadding: 5,\n            tickRotation: 0,\n            legend: '$ Daily Spend ',\n            legendOffset: -50,\n            legendPosition: 'middle'\n        }}/>\n</Box>)\n\nexport default class DailyView extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: Array.from(sumByDate(props.transactions)).map(day => {\n        return ({x: day[0], y: day[1]})\n      }).reverse()\n    };\n  }\n\n  render() {\n    const {data: chartData} = this.state;\n\n    if (!chartData) {\n      return null;\n    }\n\n    console.log(chartData);\n\n    return (<MyResponsiveBar chartData={chartData}/>);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}